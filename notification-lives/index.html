<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">

		<title>The many lives of a notification</title>

		<link rel="stylesheet" href="../reveal/css/reveal.css">
		<link rel="stylesheet" href="../reveal/css/theme/simple.css">
		<link rel="stylesheet" href="../reveal/plugin/accessibility/helper.css">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="../reveal/lib/css/zenburn.css">
		<link rel="stylesheet" href="assets/custom.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? '../reveal/css/print/pdf.css' : '../reveal/css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section>
					<h1>The many lives of a notification</h1>
					<img src="./assets/cat-gallery.jpg" alt="a series of colorful cat illustrations">
					<aside class="notes">
						Story: I used to foster kittens...
					</aside>
				</section>

				<section>
					<label for="example-input1">Find notification terms</label>
					<div><input type="text" id="example-input1" class="terms-input" data-results="example-results1"></div>
					<ul id="example-results1" class="terms-list"></ul>
				</section>

				<section>
					<label for="example-input1">Find notification terms</label>
					<div><input type="text" id="example-input2" class="terms-input" data-results="example-results2"></div>
					<ul id="example-results2" class="terms-list"></ul>
					<div class="cat-list"></div>
				</section>

				<!-- Overview of types of notifications -->
				<section>
					<h2>Notifications: a field guide</h2>
					<aside class="notes">To start off, I'd like to first take you on a tour of the types of notifications you might find out in the wild</aside>
				</section>
				<section class="profile-slide">
					<img src="./assets/avatar.png" alt="illustrated avatar of Sarah with cat" class="profile">
					<div class="desc">
						<p>Your guide:</p>
						<ul>
							<li>herds cats at Microsoft</li>
							<li>web developer</li>
							<li>looks at lots and lots of products</li>
						</ul>
					</div>
					<aside class="notes">
						I'll be your guide for this section. A major part of my role at Microsoft is to review code and assist developers in fixing accessibility bugs. Unsurprisingly, over the past year or so of doing that, I've come across quite a number of different live regions in the wild. For your benefit (and mine) I've compile those into a handy guide.
					</aside>
				</section>
				<section>
					<h3>Classifications and terms</h3>
					<aside class="notes">
						<p>If you're going to talk about cats, you need to know some terms. Tabby, calico, house cat, long hair, persian, things like that.</p>
						<p>So let's start by going over some of the ways we classify notifications, and some of the characteristics you may observe. This will help you identify and distinguish between the different types when you encounter them.</p>
					</aside>
				</section>
				<section>
					<h4>ARIA Roles</h4>
					<ul aria-label="the common roles">
						<li>alert</li>
						<li>status</li>
					</ul>
					<ul class="fragment" aria-label="the rare varieties">
						<li>log</li>
						<li>marquee</li>
						<li>timer</li>
					</ul>
					<aside class="notes">
						<p>Alert and status are the most common types of ARIA live regions. Alert is, as it sounds, an assertive announcement. Status provides a polite announcement.</p>
						<p>We'll talk more about the lesser-used roles later, but one reason you don't see them much is they don't have good assistive tech support.</p>
						<p>A role determines not only how the live region behaves, but also imparts semantics. So, for example, an alert role will cause the notification to be read immediately, and also adds "alert" semantic meaning.</p>
					</aside>
				</section>
				<section>
					<h4>ARIA attributes</h4>
					<aside class="notes">
						All ARIA live region attributes define how a live region should behave, but not any semantic meaning. You can create a live region from scratch with no role using only attributes, or modify how a live region role behaves.
					</aside>
				</section>
				<section>
					<p class="text-emphasis">aria-live</p>
					<p><code>assertive</code> | <code>polite</code></p>
				</section>
				<section>
					<p class="text-emphasis">aria-atomic</p>
					<p><code>true</code> | <code>false</code></p>
				</section>
				<section>
					<p class="text-emphasis">aria-relevant</p>
					<p><code>all</code> | <code>additions</code> | <code>removals</code> | <code>text</code> | <code>additions text</code></p>
				</section>
				<section>
					<p class="text-emphasis">aria-busy</p>
					<p><code>true</code> | <code>false</code></p>
				</section>
				<section>
					<h4>The &lt;output&gt; element</h4>
					<blockquote>The output element represents the result of a calculation performed by the application, or the result of a user action.</blockquote>
					<p>(Also, just read <a href="https://www.scottohara.me/blog/2019/07/10/the-output-element.html">Scott's article</a>)</p>
					<aside class="notes">
						The definition is from the WHATWG HTML spec. The output element is mapped to a role of status, and that is implemented in all browsers but Firefox and Android browsers (according to Scott, whose research I shamelessly copied here. I hope you all enjoyed his dialog talk yesterday, go bother him if you have questions about output.)
					</aside>
				</section>
				<section>
					<h3>Domestic Notifications</h3>
					<div class="stats-card">
						<table class="stats-table">
							<tr>
								<td>Type</td>
								<td>Assertive or polite</td>
							</tr>
							<tr>
								<td>Habitat</td>
								<td>What sort of UI does it commonly occur in</td>
							</tr>
							<tr>
								<td>Rarity</td>
								<td>How common is this type of notification</td>
							</tr>
							<tr>
								<td>Risk</td>
								<td>How likely is it for this live region to fail if used? How high are the consequences if it does?</td>
							</tr>
						</table>
					</div>
					<aside class="notes">
						<p>This is the part of the talk where I ask you if you know what a notification is, and how to recognize one on them web. Then you tell me that you do, and then I proceed to classify them in detail anyway.</p>
						<p>We're going to start with the common domestic notifications: these are the notifications you *want* to welcome into your website or web app.</p>
					</aside>
				</section>
				<section>
					<h4>Loading...</h4>
					<div class="stats-card">
						<table class="stats-table">
							<tr>
								<td>Type</td>
								<td>Polite</td>
							</tr>
							<tr>
								<td>Habitat</td>
								<td>Wide-ranging; can be found almost anywhere.</td>
							</tr>
							<tr>
								<td>Rarity</td>
								<td>Common</td>
							</tr>
							<tr>
								<td>Risk</td>
								<td>Low</td>
							</tr>
						</table>
						<img src="./assets/roombacat.gif" class="stats-image" alt="slowly rotating cat sitting on a roomba">
					</div>
					<aside class="notes">
						<p>As single page apps are now much more common, often the loading of content and assets happens asynchronously, and not through the browser's default page load events. This requires handling loading and loaded announcements manually.</p>
						<p>Dangers can include focus changes at the same time as loading announcements, causing conflict. Low risk even if not read; no content would be missed.</p>
					</aside>
				</section>
				<section>
					<h4>Form errors</h4>
					<div class="stats-card">
						<table class="stats-table">
							<tr>
								<td>Type</td>
								<td>Polite for inline errors, assertive after submit</td>
							</tr>
							<tr>
								<td>Habitat</td>
								<td>Found exclusively within forms</td>
							</tr>
							<tr>
								<td>Rarity</td>
								<td>Common</td>
							</tr>
							<tr>
								<td>Risk</td>
								<td>Medium</td>
							</tr>
						</table>
						<img src="./assets/cat3.jpg" class="stats-image" alt="guilty looking cat giving side eye" style="max-width: 35%;">
					</div>
					<aside class="notes">
						<p>Both form field errors and success messages that are displayed on screen as the user moves through a form should also be communicated to screen reader users.</p>
						<p>Whether the type for inline errors should be polite or assertive is a bit subjective.</p>
						<p>Medium risk b/c there's a high chance of conflict with focus changes, and missing errors can be a major cause of frustration when trying to understand how to complete a form.</p>
					</aside>
				</section>
				<section>
					<h4>Search results</h4>
					<div class="stats-card">
						<table class="stats-table">
							<tr>
								<td>Type</td>
								<td>Assertive and concise</td>
							</tr>
							<tr>
								<td>Habitat</td>
								<td>Any search or filter interface</td>
							</tr>
							<tr>
								<td>Rarity</td>
								<td>Common</td>
							</tr>
							<tr>
								<td>Risk</td>
								<td>Low</td>
							</tr>
						</table>
						<img src="./assets/cat10.jpg" class="stats-image" alt="cat offering a fish in its mouth">
					</div>
					<aside class="notes">
						<p>These can be full-site searches, product filters, or a data table search, as long as it happens without reload. Keep announcements as brief as possible, along the lines of "X results found"</p>
						<p>Do not announce results if they live-update as the user is typing. Set a timeout after keyboard events, and only update the live region after a second (ish, test this) of no new key strokes.</p>
					</aside>
				</section>
				<section>
					<h4>Progress indicators</h4>
					<div class="stats-card">
						<table class="stats-table">
							<tr>
								<td>Type</td>
								<td>Polite / progressbar</td>
							</tr>
							<tr>
								<td>Habitat</td>
								<td>Wide-ranging; often found with upload and download UI</td>
							</tr>
							<tr>
								<td>Rarity</td>
								<td>Common</td>
							</tr>
							<tr>
								<td>Risk</td>
								<td>Medium</td>
							</tr>
						</table>
						<img src="./assets/cat13.jpg" class="stats-image" alt="illustrated cat washing its face">
					</div>
					<aside class="notes">
						<p>Progressbars are common, and there is a progressbar role. Unfortunately, web has nothing like the support desktop does for that role. Medium risk because native support is so poor that a custom solution is needed if the progress is important to announce.</p>
					</aside>
				</section>
				<section>
					<h4>Toasts</h4>
					<div class="stats-card">
						<table class="stats-table">
							<tr>
								<td>Type</td>
								<td>Assertive / alert (or depending on the message)</td>
							</tr>
							<tr>
								<td>Habitat</td>
								<td>Primarily confined to application-style interfaces</td>
							</tr>
							<tr>
								<td>Rarity</td>
								<td>Uncommon</td>
							</tr>
							<tr>
								<td>Risk</td>
								<td>High</td>
							</tr>
						</table>
						<img src="./assets/toast-cat.jpg" class="stats-image" alt="cat with its face stuck in a piece of bread, looking generally upset">
					</div>
					<aside class="notes">
						<p>The word "toast" has come to mean asynchronous notifications that are not tied to any particular part of the UI, and often appear overlaid on the screen in one corner.</p>
						<p>Toasts are a particular pest for magnification users</p>
						<p>Because toasts are divorced from current user interaction and context, they are very difficult to review. Interactive elements within toasts present additional barriers. Also cause issues with magnifiers.</p>
					</aside>
				</section>
				<section>
					<h4>Feeds and Chat messages</h4>
					<div class="stats-card">
						<table class="stats-table">
							<tr>
								<td>Type</td>
								<td>Polite / log</td>
							</tr>
							<tr>
								<td>Habitat</td>
								<td>Within application-style interfaces, usually where they are the main feature</td>
							</tr>
							<tr>
								<td>Rarity</td>
								<td>Uncommon</td>
							</tr>
							<tr>
								<td>Risk</td>
								<td>Medium</td>
							</tr>
						</table>
						<img src="./assets/row-of-cats.jpg" class="stats-image" alt="cat with top hat conjures row of identical cats">
					</div>
					<aside class="notes">
						<p>It's possible to have a feed as a supplemental part of a UI, particularly a complex app-like UI. But most often found in chat apps, or where the updating content is the primary focus of the UI. If it is supplemental, consider not having a live region at all; it could be distracting.</p>
					</aside>
				</section>
				<section>
					<h4>Live charts and data</h4>
					<p class="small">e.g. a stock ticker or CPU usage graph</p>
					<div class="stats-card">
						<table class="stats-table">
							<tr>
								<td>Type</td>
								<td>marquee (unsupported)</td>
							</tr>
							<tr>
								<td>Habitat</td>
								<td>Specialized scenarios, primarily within applications</td>
							</tr>
							<tr>
								<td>Rarity</td>
								<td>Rare</td>
							</tr>
							<tr>
								<td>Risk</td>
								<td>High</td>
							</tr>
						</table>
						<img src="./assets/cat16.jpg" class="stats-image" alt="six cats precariously dancing on top of each other">
					</div>
					<aside class="notes">
						<p>There is no good markup for this use case now, since marquee does not have good support. Both assertive and polite live regions would interfere with consuming other content, due to the constant updates.</p>
						<p>Current suggestion: manually batch and announce updates, or provide a way to turn live updates on and off. High cognitive load to use, and a lot of manual work needed.</p>
					</aside>
				</section>
				<section>
					<h4>Timers</h4>
					<div class="stats-card">
						<table class="stats-table">
							<tr>
								<td>Type</td>
								<td>timer (unsupported)</td>
							</tr>
							<tr>
								<td>Habitat</td>
								<td>Booking sites, tests, specialized cases</td>
							</tr>
							<tr>
								<td>Rarity</td>
								<td>Rare</td>
							</tr>
							<tr>
								<td>Risk</td>
								<td>High</td>
							</tr>
						</table>
						<img src="./assets/cat11.jpg" class="stats-image" alt="pink illustrated cat, looking up">
					</div>
					<aside class="notes">
						<p>Timers should only be used if they are absolutely necessary, e.g. a stock trading time limit, or a standardized test (though even that is contentious). They cannot be a straightforward live region, since they would be overly distracting (like the last example)</p>
						<p>One solution is to manually batch updates, getting more frequent as the timer approaches 0. Or do not make it a live region at all, and explore other possibilities. No established pattern for this, lots of manual work, high risk.</p>
					</aside>
				</section>
				<section>
					<h3>Feral Notifications</h3>
					<p>How to recognize and avoid dangerous live regions in the wild</p>
					<img src="./assets/cat14.jpg" alt="two cats dancing on top of a laundry line">
					<aside class="notes">
						Unlike domestic notifications, these are the ones you want to avoid; they are often unfriendly, and may attack on sight.
					</aside>
				</section>
				<section>
					<h4>Control hints</h4>
					<div class="stats-card">
						<table class="stats-table">
							<tr>
								<td>Habitat</td>
								<td>Non-standard controls, or ARIA patterns with poor support</td>
							</tr>
							<tr>
								<td>Rarity</td>
								<td>Medium</td>
							</tr>
							<tr>
								<td>Defense</td>
								<td>Use standard, supported HTML and ARIA, simplify UI, write static instructions</td>
							</tr>
						</table>
						<img src="./assets/cat15.jpg" alt="cat diving onto woman knitting">
					</div>
					<aside class="notes">
						<p>Using live regions to try to patch real or perceived gaps in ARIA support is always a bad idea. Live regions add an extra layer of fragility, particularly when conflicting with user actions (as it will here). They are also custom and non-standard, meaning users cannot learn how to use a control across the entire web.</p>
						<p>Instead: use standard, supported controls. Break complex UI into standard chunks. Or, if needed, write a keyboard/AT help page that details how to use it instead of embedding those instructions in live regions. Remember: live regions aren't reviewable.</p>
					</aside>
				</section>
				<section>
					<h4>Context changes</h4>
					<p>e.g. popups opening, SPA navigation with focus management</p>
					<div class="stats-card">
						<table class="stats-table">
							<tr>
								<td>Habitat</td>
								<td>Dropdowns, dialogs, single page apps, and complex controls</td>
							</tr>
							<tr>
								<td>Rarity</td>
								<td>Common</td>
							</tr>
							<tr>
								<td>Defense</td>
								<td>Drop the live region, and let the focus change do the work</td>
							</tr>
						</table>
					</div>
					<aside class="notes">
						<p>Live regions combined with changes of context (meaning the user's focus is moved) are guaranteed to conflict at worst and at best are redundant. Move focus somewhere that makes sense, and let that more robust announcement do the work.</p>
					</aside>
				</section>
				<section>
					<h4>ARIA state changes</h4>
					<div class="stats-card">
						<table class="stats-table">
							<tr>
								<td>Habitat</td>
								<td>Accordions, menus, toggle buttons, and any widget that changes state</td>
							</tr>
							<tr>
								<td>Rarity</td>
								<td>Uncommon</td>
							</tr>
							<tr>
								<td>Defense</td>
								<td>ARIA state attributes</td>
							</tr>
						</table>
					</div>
					<aside class="notes">
						<p>Sometimes a developer will reach for live regions to indicate e.g. the expanded or collapsed state of an accordion. Don't let them do this. Bring along the ARIA spec for backup, and practice catch-and-release for these live regions.</p>
					</aside>
				</section>
				<section>
					<h4>The quick wrap</h4>
					<p>i.e. <code>&lt;ul class="search-results" aria-live="assertive"&gt; ... &lt;/ul&gt;</code></p>
					<div class="stats-card">
						<table class="stats-table">
							<tr>
								<td>Habitat</td>
								<td>Primarily found in application interfaces with many content changes</td>
							</tr>
							<tr>
								<td>Rarity</td>
								<td>Uncommon</td>
							</tr>
							<tr>
								<td>Defense</td>
								<td>Custom live regions with tailored, concise text</td>
							</tr>
						</table>
						<img src="./assets/cats-movie-cats.jpg" class="stats-image" alt="disturbling CGI human-cat hybrids from the 2019 movie">
					</div>
					<aside class="notes">
						<p>This happens when you take a component that has many dynamic content updates, like a table that is either editable or has dynamic data or a search results list, and just slap a live region around it, thus creating a weird hybrid monster. This will be extremely over-verbose and unhelpful. A case like that needs custom live region text tailored to be concise.</p>
						<p>Can also occur in search result sections, drag and drop interfaces (don't ask), </p>
					</aside>
				</section>

				<!-- Testing results section -->
				<section>
					<h2>Compatibility Tests</h2>
					<p>Full tests and results at <a href="https://cdpn.io/smhigley/full/abOwGro">Codepen</a></p>
					<img src="./assets/cat-introduction.jpg" alt="A new cat is introduced into a home, as two people consult a large book" style="width:40%">
					<aside class="notes">
						Before choosing a cat or notification type, it is important to assess compatibility.
					</aside>
				</section>
				<section>
					<h3>Live region types</h3>
					<table style="font-size: 0.75em">
						<thead>
						<tr>
						<td>SR</td>
						<td>Browser</td>
						<td>alert</td>
						<td>status</td>
						<td>log</td>
						<td>timer</td>
						<td>marquee</td>
						<td>progressbar</td>
						</tr>
						</thead>
						<tbody>
						<tr>
						<td>NVDA</td>
						<td>Firefox</td>
						<td>pass</td>
						<td>partial</td>
						<td>pass</td>
						<td>fail</td>
						<td>fail</td>
						<td>pass</td>
						</tr>
						<tr>
						<td>NVDA</td>
						<td>Chrome</td>
						<td>pass</td>
						<td>partial</td>
						<td>pass</td>
						<td>fail</td>
						<td>fail</td>
						<td>pass</td>
						</tr>
						<tr>
						<td>NVDA</td>
						<td>Edge</td>
						<td>pass</td>
						<td>partial</td>
						<td>pass</td>
						<td>fail</td>
						<td>fail</td>
						<td>pass</td>
						</tr>
						<tr>
						<td>JAWS</td>
						<td>Chrome</td>
						<td>pass</td>
						<td>partial</td>
						<td>pass</td>
						<td>fail</td>
						<td>fail</td>
						<td>pass</td>
						</tr>
						<tr>
						<td>JAWS</td>
						<td>Firefox</td>
						<td>pass</td>
						<td>partial</td>
						<td>partial</td>
						<td>fail</td>
						<td>fail</td>
						<td>pass</td>
						</tr>
						<tr>
						<td>JAWS</td>
						<td>Edge</td>
						<td>pass</td>
						<td>pass</td>
						<td>pass</td>
						<td>fail</td>
						<td>fail</td>
						<td>fail</td>
						</tr>
						<tr>
						<td>Narrator</td>
						<td>Edge</td>
						<td>partial</td>
						<td>partial</td>
						<td>fail</td>
						<td>fail</td>
						<td>fail</td>
						<td>fail</td>
						</tr>
						<tr>
						<td>VoiceOver</td>
						<td>iOS Safari</td>
						<td>pass</td>
						<td>pass</td>
						<td>pass</td>
						<td>fail</td>
						<td>fail</td>
						<td>fail</td>
						</tr>
						</tbody>
						</table>
					<aside class="notes">
						I've collapsed some of the nuances of different screen readers and browsers for readability in a single slide. The full test results will be linked later, with the slide deck.
					</aside>
				</section>
				<section>
					<h3>Live region attributes</h3>
					<table style="font-size:0.75em">
						<thead>
						<tr>
						<td>SR</td>
						<td>Browser</td>
						<td>assertive</td>
						<td>polite</td>
						<td>atomic</td>
						<td>relevant</td>
						<td>busy</td>
						</tr>
						</thead>
						<tbody>
						<tr>
						<td>NVDA</td>
						<td>Firefox</td>
						<td>pass</td>
						<td>pass</td>
						<td>pass</td>
						<td>fail</td>
						<td>partial</td>
						</tr>
						<tr>
						<td>NVDA</td>
						<td>Chrome</td>
						<td>pass</td>
						<td>pass</td>
						<td>pass</td>
						<td>fail</td>
						<td>fail</td>
						</tr>
						<tr>
						<td>NVDA</td>
						<td>Edge</td>
						<td>pass</td>
						<td>pass</td>
						<td>pass</td>
						<td>fail</td>
						<td>fail</td>
						</tr>
						<tr>
						<td>JAWS</td>
						<td>Chrome</td>
						<td>pass</td>
						<td>pass</td>
						<td>pass</td>
						<td>fail</td>
						<td>partial</td>
						</tr>
						<tr>
						<td>JAWS</td>
						<td>Firefox</td>
						<td>partial</td>
						<td>partial</td>
						<td>pass</td>
						<td>fail</td>
						<td>partial</td>
						</tr>
						<tr>
						<td>JAWS</td>
						<td>Edge</td>
						<td>pass</td>
						<td>pass</td>
						<td>pass</td>
						<td>fail</td>
						<td>partial</td>
						</tr>
						<tr>
						<td>Narrator</td>
						<td>Edge</td>
						<td>partial</td>
						<td>partial</td>
						<td>fail</td>
						<td>fail</td>
						<td>fail</td>
						</tr>
						<tr>
						<td>VoiceOver</td>
						<td>iOS Safari</td>
						<td>pass</td>
						<td>pass</td>
						<td>pass</td>
						<td>pass</td>
						<td>fail</td>
						</tr>
						</tbody>
						</table>
				</section>
				<section>
					<h3>Handling conflicts</h3>
					<table style="font-size:0.75em;">
						<thead>
						<tr>
						<td>SR</td>
						<td>Browser</td>
						<td>User actions</td>
						<td>Focus change</td>
						<td>Two live regions</td>
						</tr>
						</thead>
						<tbody>
						<tr>
						<td>NVDA</td>
						<td>Firefox</td>
						<td>fail</td>
						<td>fail</td>
						<td>pass</td>
						</tr>
						<tr>
						<td>NVDA</td>
						<td>Chrome</td>
						<td>fail</td>
						<td>fail</td>
						<td>pass</td>
						</tr>
						<tr>
						<td>NVDA</td>
						<td>Edge</td>
						<td>fail</td>
						<td>fail</td>
						<td>pass</td>
						</tr>
						<tr>
						<td>JAWS</td>
						<td>Chrome</td>
						<td>fail</td>
						<td>pass</td>
						<td>pass</td>
						</tr>
						<tr>
						<td>JAWS</td>
						<td>Firefox</td>
						<td>fail</td>
						<td>pass</td>
						<td>pass</td>
						</tr>
						<tr>
						<td>JAWS</td>
						<td>Edge</td>
						<td>fail</td>
						<td>pass</td>
						<td>pass</td>
						</tr>
						<tr>
						<td>Narrator</td>
						<td>Edge</td>
						<td>pass</td>
						<td>pass</td>
						<td>pass</td>
						</tr>
						<tr>
						<td>VoiceOver</td>
						<td>iOS Safari</td>
						<td>fail</td>
						<td>fail</td>
						<td>partial</td>
						</tr>
						</tbody>
						</table>
				</section>
				<section>
					<h3>Types of content</h3>
					<table style="font-size:0.75em">
						<thead>
						<tr>
						<td>SR</td>
						<td>Browser</td>
						<td>Rich text</td>
						<td>Timeout</td>
						<td>CSS Display</td>
						<td>Non-text</td>
						<td>Input value</td>
						</tr>
						</thead>
						<tbody>
						<tr>
						<td>NVDA</td>
						<td>Firefox</td>
						<td>pass</td>
						<td>pass</td>
						<td>pass</td>
						<td>partial</td>
						<td>pass</td>
						</tr>
						<tr>
						<td>NVDA</td>
						<td>Chrome</td>
						<td>pass</td>
						<td>pass</td>
						<td>pass</td>
						<td>pass</td>
						<td>pass</td>
						</tr>
						<tr>
						<td>NVDA</td>
						<td>Edge</td>
						<td>pass</td>
						<td>pass</td>
						<td>pass</td>
						<td>pass</td>
						<td>pass</td>
						</tr>
						<tr>
						<td>JAWS</td>
						<td>Chrome</td>
						<td>pass</td>
						<td>pass</td>
						<td>pass</td>
						<td>partial</td>
						<td>pass</td>
						</tr>
						<tr>
						<td>JAWS</td>
						<td>Firefox</td>
						<td>pass</td>
						<td>pass</td>
						<td>pass</td>
						<td>partial</td>
						<td>partial</td>
						</tr>
						<tr>
						<td>JAWS</td>
						<td>Edge</td>
						<td>pass</td>
						<td>pass</td>
						<td>pass</td>
						<td>pass</td>
						<td>pass</td>
						</tr>
						<tr>
						<td>Narrator</td>
						<td>Edge</td>
						<td>partial</td>
						<td>fail</td>
						<td>fail</td>
						<td>pass</td>
						<td>pass</td>
						</tr>
						<tr>
						<td>VoiceOver</td>
						<td>iOS Safari</td>
						<td>pass</td>
						<td>pass</td>
						<td>pass</td>
						<td>partial</td>
						<td>fail</td>
						</tr>
						</tbody>
						</table>
				</section>
				<section>
					<h3>Other factors</h3>
					<ul>
						<li>Page weight and performance</li>
						<li>Hybrid apps, e.g. using Electron</li>
						<li>User interaction</li>
						<li>Hardware and other running software</li>
					</ul>
					<aside class="notes">
						Large page weight, or frequent DOM mutations can have an outsize impact on screen reader performance. This could mean live region changes get dropped. This is a theory, since we've seen this happen on older machines and not repro on newer ones, or occur in an app but not in a simplified reproduction.
					</aside>
				</section>

				<!-- Tips & tricks section -->
				<section>
					<h2>Tips for getting along with your new notification</h2>
					<p>So you've decided to implement a new notification, but things aren't going well; now what?</p>
					<img src="./assets/serving-cat.jpg" alt="A cat waits with knife and fork at a table, as a waiter brings a roast bird">
				</section>
				<section>
					<h3>1. Keep it concise</h3>
					<p>Why?</p>
					<ul>
						<li>Notification text can't be easily reviewed</li>
						<li>Distracts and interrupts user interaction</li>
					</ul>
					<aside class="notes">
						<p>If you can see, you can visually scan the number of results returned without reading each one, until you choose to. Give the same experience to screen reader users. This is especially true for large blocks of updating content, like search results region or data table.</p>
						<p>Lean towards custom notification text, and write that as concise as possible</p>
					</aside>
				</section>
				<section>
					<h3>2. Don't use special characters or non-text content</h3>
					<p>Why?</p>
					<ul>
						<li>Notification text cannot be reviewed character-by-character</li>
						<li>Many text-to-speech engines and verbosity settings will ignore them</li>
						<li>Support is lacking for non-text content</li>
					</ul>
				</section>
				<section>
					<h3>3. Set a timeout to remove notification text</h3>
					<p>When?</p>
					<ul>
						<li>Screen reader-only notifications</li>
					</ul>
					<p>Why?</p>
					<ul>
						<li>Reduces duplicate announcements</li>
						<li>Avoids reading all previons announcements</li>
						<li>Allows repeating the same announcement</li>
					</ul>
					<aside class="notes">
						<p>See: common bug where all text is read if new text is added, even if aria-atomic is false. Depending on how you handle updates, if you simply replace the notification text, you can't announce the same thing multiple times in a row.</p>
					</aside>
				</section>
				<section>
					<h3>4. Handle insertion vs. updates wisely</h3>
					<p>Why?</p>
					<ul>
						<li>Support gaps for dynamic insertion</li>
						<li>Certain role + attribute combinations cause duplicate announcements</li>
						<li>For updates, support is better if the element exists at or close to page load</li>
					</ul>
					<aside class="notes">
						<p>Only alert has good support for dynamic insertion (i.e. inserting the role when you want it read). </p>
					</aside>
				</section>
				<section>
					<h3>5. Create a notification service</h3>
					<p>When?</p>
					<ul>
						<li>Complex apps with many notifications</li>
						<li>App-wide notifications, toast notifications</li>
						<li>Frequent conflicting notifications</li>
					</ul>
					<aside class="notes">
						By "notification service" I mean a centralized, top-level component that handles creating custom notification announcements, that lower-level components can simply invoke with a text string and options.
					</aside>
				</section>
				<section>
					<p>Why?</p>
					<ul>
						<li>Prevents conflicts</li>
						<li>Centralizes debugging work</li>
						<li>Ensures the live region is present on page load</li>
					</ul>
					<aside class="notes">Also, fewer live regions in the page means better performance. Handles the other nuances for you, so you don't need to remember to look support up every time.</aside>
				</section>
				<section>
					<h3>6. Create a notifications center</h3>
					<img src="./assets/notification-center.png" alt="github notification center showing icon and notification inbox">
				</section>
				<section>
					<p>When?</p>
					<ul>
						<li>Complex apps with many notifications</li>
						<li>Toast notifications</li>
					</ul>
					<aside class="notes">
						By "notification service" I mean a centralized, top-level component that handles creating custom notification announcements, that lower-level components can simply invoke with a text string and options.
					</aside>
				</section>
				<section>
					<p>Why?</p>
					<ul>
						<li>Solves magnification problems</li>
						<li>Solves timeout issues, if timeouts exist</li>
						<li>Easily reviewable</li>
					</ul>
					<aside class="notes">If you've learned nothing else, I hope you've learned that notifications fail easily. A notification center creates a failsafe. Also, solves issues with live text not being easily reviewable word-by-word for screen reader users</aside>
				</section>
				<section>
					<h3>7. Debug with a mutation observer</h3>
					<pre><code data-trim data-noescape class="js">
						function observeElement(element) {
						  const callback = function(mutationsList, observer) {
						    for(let mutation of mutationsList) {
						      if (mutation.type === 'childList') {
						        console.log('A child node has been added or removed.');
						      }
						      else if (mutation.type === 'attributes') {
						        console.log(`${mutation.attributeName} was modified.`);
						      }
						    }
						  };
						  const observer = new MutationObserver(callback);
						  observer.observe(element, config);
						}
					</code></pre>
					Note: I will be fixing contrast in the code
					<aside class="notes">
						<p>I keep this saved in a gist for when I need it</p>
						<p>With single page app frameworks like React, sometimes you can unintentionally remove and re-insert the live region element in the DOM if you aren't careful. The mutation observer lets you see exactly what DOM changes are occurring. Try adding it to a wrapper element around the live region element</p>
						<p>Fun tip! You can also sometimes use this to debug other accessibility issues with dynamic content, particularly around inserting/removing content, or if the virtual cursor or focus is being unexpectedly lost.</p>
					</aside>
				</section>
				<section>
					<h3>8. Don't use a live region!</h3>
					<img src="./assets/dog.jpg" alt="child looking at three dogs">
					<aside class="notes">Like cats, live regions aren't always the best choice</aside>
				</section>
				<section>
					<p>Instead:</p>
					<ul>
						<li>Move focus</li>
						<li>Write clear UI instructions</li>
					</ul>
					<aside class="notes">
						<p>One example: on a single page app page change, consider moving focus to the new content container, instead of firing a live region. Also has the benefit of bypassing blocks.</p>
						<p>Other example: a checkbox that enables more form fields doesn't need a live region if the instructions are good enough</p>
					</aside>
				</section>

				<!-- Future section -->
				<section>
					<h2>The future of notifications</h2>
					<img src="./assets/borg-cats.jpg" alt="three cyborg cats" style="width:90%">
				</section>
				<section>
					<p>File support issues</p>
					<img src="./assets/jaws-issue.png" alt="A JAWS github issue about aria-relevant removeals not working">
					<img src="./assets/nvda-issue.png" alt="An NVDA github issue about focus change live region conflicts">
					<aside class="notes">
						Most screen readers and browsers have public issue trackers
					</aside>
				</section>
				<section>
					<p>Get involved in standards! <br>Let them know what you think</p>
					<img src="./assets/aria-live-github.png" alt="ARIA spec github issue about deprecating all live roles but alert">
					<aside class="notes">
						This is on the ARIA spec. If you don't agree (or if you do agree), go comment on this issue! If you have use cases that aren't covered by current live region semantics, open a new issue!
					</aside>
				</section>
				<section>
					<p>marquee, timer, or something new, could enable UI like this:</p>
					<video controls>
						<source src="./assets/task-manager.mp4" type="video/mp4">
						Sorry, your browser doesn't support embedded videos.
					</video>
				</section>
				<section>
					<p>Push for browsers, screen readers, and specs to handle common use cases for you</p>
					<img src="./assets/loading.gif" alt="animated loading bar">
					<p>at forums like <a href="https://webwewant.fyi/">the Web We Want</a></p>
				</section>
				<section>
					<p>And finally, use your powers wisely</p>
					<img src="./assets/lightning-cat.jpg" alt="kitten standing atop a mountain range, shooting lightning from its paws" style="width:60%">
				</section>
			</div>
			<footer class="global-footer">
				<a href="https://twitter.com/codingchaos">@codingchaos</a>
			</footer>
		</div>

		<script src="../reveal/lib/js/head.min.js"></script>
		<script src="../reveal/js/reveal.js"></script>
		<script src="./assets/custom.js"></script>

		<script>
			// More info about config & dependencies:
			// - https://github.com/hakimel/reveal.js#configuration
			// - https://github.com/hakimel/reveal.js#dependencies
			Reveal.initialize({
				dependencies: [
					{ src: '../reveal/plugin/markdown/marked.js' },
					{ src: '../reveal/plugin/markdown/markdown.js' },
					{ src: '../reveal/plugin/notes/notes.js', async: true },
					{ src: '../reveal/plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: '../reveal/plugin/accessibility/helper.js', async: true, condition: function() { return !!document.body.classList; } }
				],
				history: true, // Transition style
				transition: 'slide', // none/fade/slide/convex/concave/zoom
				backgroundTransition: 'fade'
			});
		</script>
	</body>
</html>
